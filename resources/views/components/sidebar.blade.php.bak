<aside id="crmt-nav-sidebar" class="w-96 bg-[#0F172A] text-white flex flex-col flex-shrink-0 transition-all duration-300 fixed left-0 top-0 h-full z-10 shadow-xl">
    <div class="h-16 flex items-center justify-between px-6 border-b border-gray-800">
        <a href="{{ route('home') }}" class="flex items-center gap-3 text-xl font-bold tracking-tight hover:opacity-80 transition-opacity">
            <div class="w-9 h-9 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0">
                <i class="fa-solid fa-crosshairs text-white text-sm"></i>
            </div>
            <span class="nav-text">CRMTracker</span>
        </a>
        <button onclick="toggleCRMTNavbar()" class="text-gray-400 hover:text-white transition-colors" title="Collapse sidebar">
            <i class="fa-solid fa-chevron-left"></i>
        </button>
    </div>

    <nav class="flex-1 overflow-y-auto py-4">
        <!-- CRMTracker Scores Link -->
        <a href="{{ route('home') }}" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors mb-2">
            <i class="fa-solid fa-star w-5 text-center text-yellow-400"></i>
            <span class="text-sm font-medium">CRMTrackerÂ® Scores</span>
        </a>

        <!-- CRMT Modules Section -->
        <div class="px-4 mb-2 mt-2 text-xs font-semibold text-gray-500 uppercase tracking-wider flex items-center gap-2">
            <span class="w-2 h-2 rounded-full bg-blue-500"></span>
            CRMT Modules
        </div>

        <!-- M.1 Marketer's Must-Haves -->
        <div class="nav-group">
            <a href="#" onclick="toggleCRMTSubmenu(this); return false;" class="nav-item flex items-center justify-between gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors cursor-pointer">
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-chart-line w-5 text-center"></i>
                    <span class="nav-text text-sm font-medium">M.1 Marketer's Must-Haves</span>
                </div>
                <i class="fa-solid fa-chevron-down text-xs transition-transform"></i>
            </a>
            <div class="nav-submenu bg-slate-900" style="max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;">
                <a href="{{ route('reports.1.1') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">1.1 Performance Dashboard</a>
                <a href="{{ route('reports.1.2') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">1.2 Journey Mapping</a>
                <a href="{{ route('reports.1.3') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">1.3 Customer Lifecycle</a>
                <a href="{{ route('reports.1.4') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">1.4 Product Matrix</a>
                <a href="{{ route('reports.1.5') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">1.5 Timing Intelligence</a>
            </div>
        </div>

        <!-- M.2 Content & Creator -->
        <div class="nav-group">
            <a href="#" onclick="toggleCRMTSubmenu(this); return false;" class="nav-item flex items-center justify-between gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors cursor-pointer">
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-file-lines w-5 text-center"></i>
                    <span class="nav-text text-sm font-medium">M.2 Content & Creator</span>
                </div>
                <i class="fa-solid fa-chevron-down text-xs transition-transform"></i>
            </a>
            <div class="nav-submenu bg-slate-900" style="max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;">
                <a href="{{ route('reports.2.1') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">2.1 Content Quality Hub</a>
                <a href="{{ route('reports.2.2') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">2.2 Offers & Risk</a>
            </div>
        </div>

        <!-- M.3 Compliance & Social -->
        <div class="nav-group">
            <a href="#" onclick="toggleCRMTSubmenu(this); return false;" class="nav-item flex items-center justify-between gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors cursor-pointer">
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-shield w-5 text-center"></i>
                    <span class="nav-text text-sm font-medium">M.3 Compliance & Social</span>
                </div>
                <i class="fa-solid fa-chevron-down text-xs transition-transform"></i>
            </a>
            <div class="nav-submenu bg-slate-900" style="max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;">
                <a href="{{ route('reports.3.1') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">3.1 Compliance Scorecard</a>
                <a href="{{ route('reports.3.2') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">3.2 Compliance Alignment</a>
                <a href="{{ route('reports.3.3') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">3.3 Audit Preparedness</a>
            </div>
        </div>

        <!-- M.4 Regulatory & Legal -->
        <div class="nav-group">
            <a href="#" onclick="toggleCRMTSubmenu(this); return false;" class="nav-item flex items-center justify-between gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors cursor-pointer">
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-gavel w-5 text-center"></i>
                    <span class="nav-text text-sm font-medium">M.4 Regulatory & Legal</span>
                </div>
                <i class="fa-solid fa-chevron-down text-xs transition-transform"></i>
            </a>
            <div class="nav-submenu bg-slate-900" style="max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;">
                <a href="{{ route('reports.4.1') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">4.1 License & Entity Verification</a>
                <a href="{{ route('reports.4.2') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">4.2 Compliance Cost Analysis</a>
                <a href="{{ route('reports.4.3') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">4.3 Transparency Audit</a>
            </div>
        </div>

        <!-- M.5 M&A Better Deals -->
        <div class="nav-group">
            <a href="#" onclick="toggleCRMTSubmenu(this); return false;" class="nav-item flex items-center justify-between gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors cursor-pointer">
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-briefcase w-5 text-center"></i>
                    <span class="nav-text text-sm font-medium">M.5 M&A Better Deals</span>
                </div>
                <i class="fa-solid fa-chevron-down text-xs transition-transform"></i>
            </a>
            <div class="nav-submenu bg-slate-900" style="max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;">
                <a href="{{ route('reports.5.1') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">5.1 Valuation Uplift</a>
                <a href="{{ route('reports.5.2') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">5.2 Compliance Exposure</a>
                <a href="{{ route('reports.5.3') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">5.3 Migration Readiness</a>
            </div>
        </div>

        <!-- M.6 Consulting Augment -->
        <div class="nav-group">
            <a href="#" onclick="toggleCRMTSubmenu(this); return false;" class="nav-item flex items-center justify-between gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors cursor-pointer">
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-handshake w-5 text-center"></i>
                    <span class="nav-text text-sm font-medium">M.6 Consulting Augment</span>
                </div>
                <i class="fa-solid fa-chevron-down text-xs transition-transform"></i>
            </a>
            <div class="nav-submenu bg-slate-900" style="max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;">
                <a href="{{ route('reports.6.1') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">6.1 Benchmarking</a>
                <a href="{{ route('reports.6.2') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">6.2 Strategy Matrix</a>
                <a href="{{ route('reports.6.3') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">6.3 SOW Generator</a>
            </div>
        </div>

        <!-- M.7 Brand Intelligence -->
        <div class="nav-group">
            <a href="#" onclick="toggleCRMTSubmenu(this); return false;" class="nav-item flex items-center justify-between gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors cursor-pointer">
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-building w-5 text-center"></i>
                    <span class="nav-text text-sm font-medium">M.7 Brand Intelligence</span>
                </div>
                <i class="fa-solid fa-chevron-down text-xs transition-transform"></i>
            </a>
            <div class="nav-submenu bg-slate-900" style="max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out;">
                <a href="{{ route('reports.7.1') }}" class="block pl-12 pr-4 py-2.5 text-sm text-slate-400 hover:text-white hover:bg-slate-800 transition-colors">7.1 Brand Profile</a>
            </div>
        </div>

        <!-- Data Modules Section -->
        <div class="px-4 mb-2 mt-6 text-xs font-semibold text-gray-500 uppercase tracking-wider flex items-center gap-2">
            <span class="w-2 h-2 rounded-full bg-purple-500"></span>
            Data Modules
        </div>

        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-scale-balanced w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">D.1 Jurisdiction & Regulatory</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-id-card w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">D.2 Licensing Registry</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-building w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">D.3 Company Directories</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-envelope w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">D.4 CRM Information</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-tags w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">D.5 Offer Directory</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-database w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">D.6 Competitor Data</span>
        </a>

        <!-- Admin Section -->
        <div class="px-4 mb-2 mt-6 text-xs font-semibold text-gray-500 uppercase tracking-wider flex items-center gap-2">
            <span class="w-2 h-2 rounded-full bg-red-500"></span>
            Admin
        </div>

        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-sliders w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">A.1 Weighting Settings</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-sitemap w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">A.2 Data Governance</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-globe w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">A.3 Country Recap</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-database w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">A.4 Pipeline Manager</span>
        </a>
        @if(auth()->user()->hasRole('admin'))
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-users-gear w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">A.5 User Management</span>
        </a>
        @endif
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-credit-card w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">A.6 Product Intelligence</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-calendar-check w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">A.7 Tracking Manager</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 text-gray-400 hover:text-white hover:bg-gray-800 transition-colors">
            <i class="fa-solid fa-book-open w-5 text-center"></i>
            <span class="nav-text text-sm font-medium">A.8 Documentation Hub</span>
        </a>
    </nav>

    <!-- User Footer -->
    <div class="p-4 border-t border-gray-800">
        <div class="flex items-center gap-3">
            <div class="w-9 h-9 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold flex-shrink-0">
                {{ strtoupper(substr(auth()->user()->name, 0, 2)) }}
            </div>
            <div class="flex-1 min-w-0">
                <p class="text-sm font-medium text-white truncate">{{ auth()->user()->name }}</p>
                <p class="text-xs text-gray-500 truncate">{{ auth()->user()->roles()->first()?->name ?? 'viewer' }}</p>
            </div>
            <form method="POST" action="{{ route('logout') }}" class="inline">
                @csrf
                <button type="submit" class="text-gray-400 hover:text-red-400 transition-colors" title="Logout">
                    <i class="fa-solid fa-sign-out-alt"></i>
                </button>
            </form>
        </div>
    </div>
</aside>
